<!DOCTYPE html>
<html>
<head>
  <title>fusemap-occupancy</title>

  <link rel='stylesheet' href='./css/style.css'>

  <script src='./bower_components/d3/d3.min.js'></script>
</head>
<body>
<div>
  <a href='./'>home</a>
</div>
<div>
  <canvas id='floorCanvasView'></canvas>
</div>

<script src='./js/app.js'></script>
<script src='./js/occupancy.js'></script>

<script>
  var occupancy = new Occupancy();

  d3.json('data/occupancy/occupancy.json', function(data) {
    var formatedData = FormatJsonForOccupancy(data);

    occupancy.FloorCanvasID('floorCanvasView');
    occupancy.ColorRange(['#008000', '#FFF200', '#FF0000']);
    occupancy.Dataset(formatedData);
    occupancy.LegendTitle('Power Usage');
    occupancy.IsPercent(false);

    occupancy.Init(test);
  });

  function test(value) {
    console.log('callback : ', value);

    d3.json('data/occupancy/occupancy2.json', function(data) {
      var formatedData = FormatJsonForOccupancy(data);
      occupancy.Dataset(formatedData);
      occupancy.ReDraw(test);
    });
  }
</script>
</body>
</html>